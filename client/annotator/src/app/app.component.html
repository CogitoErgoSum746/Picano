<div class="navbar">
  <h1>Annotator</h1>

  <div *ngIf="brochureFile" class="form-container">
    <!-- Form to add a product. -->
    <form (submit)="addProduct($event)">
      <input name="productId" type="text" />
      <button type="submit">Add Product</button>
    </form>

    <div *ngIf="products.size > 0">
      <label for="products">Choose a product: </label>
      <select id="products" [value]="currentProductId" (change)="changeCurrentProduct($event)">
        <option *ngFor="let product of products.keys()" [value]="product">{{ product }}</option>
      </select>
    </div>
  </div>
</div>

<!-- Provide file input if file is not already uploaded. -->
<div *ngIf="!brochureFile">
  <label for="brochure">Upload a Brochure to work with</label>
  <input
    id="brochure"
    type="file"
    accept="image/*"
    (change)="showImage($event)"
  />
</div>

<!-- Helper text to navigate the tool. -->
<h4 *ngIf="!helperText && currentProductId">Working on Product: {{currentProductId}}</h4>
<h4>{{ helperText }}</h4>

<!-- Tool Work Area is mounted if file is uploaded. -->
<div class="workspace" *ngIf="brochureFile">
  <!-- Left Section -->
  <image-cropper
    [imageFile]="brochureFile"
    [maintainAspectRatio]="false"
    format="png"
    (imageCropped)="imageCropped($event)"
  ></image-cropper>

  <!-- Right Section -->
  <div class="product-preview">
    <span>Preview Image of Product</span>
    <div class="cropped-image-container">
      <img [src]="croppedImage" />
    </div>
  </div>
</div>

<!-- Each product can be independantly cropped and updated. -->
<app-product-extractor></app-product-extractor>
